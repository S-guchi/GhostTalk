# レスポンシブデザイン実装ドキュメント

## 概要

Ghost Chatアプリケーションは、モバイル、タブレット、デスクトップの各デバイスで最適な表示を提供するためのレスポンシブデザインを実装しています。

## ブレークポイント

Tailwind CSSのデフォルトブレークポイントを使用：

- **モバイル**: < 640px (sm未満)
- **タブレット**: 640px - 767px (sm)
- **デスクトップ**: ≥ 768px (md以上)

## コンポーネント別の対応

### 1. ChatStage（チャットステージ）

#### キャラクター配置

**デスクトップ/タブレット（≥768px）**:
- 3体のキャラクターを横に配置
- 位置: 左(20%, 50%)、中央上(50%, 40%)、右(80%, 50%)

**モバイル（<768px）**:
- 3体のキャラクターを縦に配置
- 位置: 上(50%, 25%)、中央(50%, 50%)、下(50%, 75%)
- 画面の中央に配置することで、吹き出しの表示スペースを確保

#### 吹き出し位置

**デスクトップ/タブレット**:
- キャラクターの上に表示
- 吹き出しの尾は下向き

**モバイル**:
- キャラクターの横に表示（左右に配置）
- 吹き出しの尾は横向き（左または右）
- 画面端を避けるため、キャラクター位置に応じて左右を調整

#### ローディング・エラー表示

- パディング調整: `p-4`で画面端からの余白を確保
- テキストサイズ: `text-lg sm:text-xl`でモバイルでは小さめに表示
- ボタン・テキスト: `text-sm sm:text-base`でレスポンシブ対応

### 2. GhostCharacter（キャラクター）

#### サイズ調整

**デスクトップ/タブレット**:
- 画像サイズ: 150x150px
- 絵文字フォールバック: `text-8xl`

**モバイル**:
- 画像サイズ: 100x100px
- 絵文字フォールバック: `text-6xl`

#### 名前ラベル

- パディング: `px-2 sm:px-3 py-0.5 sm:py-1`
- フォントサイズ: `text-xs sm:text-sm`
- 位置: `-bottom-6`（モバイル）、`-bottom-8`（デスクトップ）

### 3. SpeechBubble（吹き出し）

#### サイズとレイアウト

**デスクトップ/タブレット**:
- 最大幅: `max-w-xs sm:max-w-sm md:max-w-md`（段階的に拡大）
- パディング: `px-4 py-3`
- 角丸: `rounded-2xl`

**モバイル**:
- 最大幅: `max-w-[280px]`（固定）
- ビューポート制限: `max-width: 80vw`
- パディング: `px-3 py-2`
- 角丸: `rounded-xl`

#### 吹き出しの尾

**デスクトップ/タブレット**:
- 位置: 下部中央
- 方向: 下向き

**モバイル**:
- 位置: 左または右の中央
- 方向: 横向き（キャラクター位置に応じて自動調整）

#### テキスト表示

- フォントサイズ: `text-sm sm:text-base`
- 行間: `leading-relaxed`で読みやすさを確保

#### キャラクター名ラベル

- 位置: `-top-2.5 left-2`（モバイル）、`-top-3 left-4`（デスクトップ）
- フォントサイズ: `text-[10px] sm:text-xs`

### 4. InputWindow（入力ウィンドウ）

#### コンテナ

- パディング: `p-4 sm:p-6 md:p-8`（段階的に拡大）
- 角丸: `rounded-xl sm:rounded-2xl`

#### タイトル

- フォントサイズ: `text-2xl sm:text-3xl`
- マージン: `mb-4 sm:mb-6`

#### テキストエリア

- パディング: `px-3 sm:px-4 py-2 sm:py-3`
- フォントサイズ: `text-sm sm:text-base`

#### 文字数カウンター

- フォントサイズ: `text-[10px] sm:text-xs`

#### 送信ボタン

- パディング: `py-2.5 sm:py-3 px-4 sm:px-6`
- フォントサイズ: `text-sm sm:text-base`

#### ヘルプテキスト

- フォントサイズ: `text-[10px] sm:text-xs`
- モバイルでは簡略表示: "最大500文字"のみ
- デスクトップでは詳細表示: "最大500文字 | Ctrl+Enterで送信 | Escでクリア"

### 5. ChatPage（チャットページ）

#### エラー表示

- パディング: `px-4 sm:px-6 py-3 sm:py-4`
- タイトルサイズ: `text-base sm:text-lg`
- テキストサイズ: `text-sm sm:text-base`
- 幅: `w-full`で画面幅に対応

#### ローディング表示

- テキストサイズ: `text-lg sm:text-xl`

## 画面サイズ検出

ChatStageコンポーネントで`window.innerWidth`を使用して画面サイズを検出：

```typescript
const [isMobile, setIsMobile] = useState(false);

useEffect(() => {
  const checkMobile = () => {
    setIsMobile(window.innerWidth < 768);
  };
  
  checkMobile();
  window.addEventListener('resize', checkMobile);
  
  return () => window.removeEventListener('resize', checkMobile);
}, []);
```

## テスト方法

### ブラウザの開発者ツール

1. Chrome/Edge/Firefoxの開発者ツールを開く（F12）
2. デバイスツールバーを有効化（Ctrl+Shift+M / Cmd+Shift+M）
3. 以下のデバイスでテスト：
   - iPhone SE (375x667)
   - iPhone 12 Pro (390x844)
   - iPad (768x1024)
   - iPad Pro (1024x1366)
   - Desktop (1920x1080)

### 確認項目

- [ ] キャラクターが画面内に適切に配置されている
- [ ] 吹き出しが画面からはみ出していない
- [ ] テキストが読みやすいサイズで表示されている
- [ ] ボタンやフォームが操作しやすいサイズである
- [ ] 横向き（ランドスケープ）でも適切に表示される

## アクセシビリティ対応

レスポンシブデザインと併せて、以下のアクセシビリティ機能も実装：

- タッチターゲットサイズ: 最小44x44px（Appleガイドライン準拠）
- フォントサイズ: 最小12px（読みやすさを確保）
- コントラスト比: WCAG AA準拠
- キーボード操作: すべての機能がキーボードで操作可能

## パフォーマンス最適化

- 画像の遅延読み込み: Next.js Imageコンポーネントを使用
- レスポンシブ画像: 画面サイズに応じて適切なサイズを読み込み
- CSS最適化: Tailwind CSSのPurgeで未使用スタイルを削除

## 今後の改善案

1. **タブレット専用レイアウト**: 768px-1024pxの範囲で最適化
2. **横向き対応**: ランドスケープモードでの専用レイアウト
3. **フォールドデバイス対応**: Galaxy Fold等の折りたたみデバイス
4. **ダイナミックフォントサイズ**: ユーザーのブラウザ設定に応じた調整
